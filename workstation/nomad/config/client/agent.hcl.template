
client {
  enabled = true
  host_volume "datum_host" {
    path      = "${NOMAD_DATA_DIR}/volume_host"
    read_only = false
  }

}

consul {
  # The address to the Consul agent.
  address = "${CONSUL_ADDRESS}"

  # The service name to register the server and client with Consul.
  server_service_name = "nomad-server"
  client_service_name = "nomad-client"

  # Enables automatically registering the services.
  auto_advertise = true

  client_auto_join = true
    
  token = "${CONSUL_BOOTSTRAP_TOKEN}"
}

addresses {
  rpc = "${ADDRESS_RPC}"
  http = "${ADDRESS_HTTP}"
  serf = "${ADVERTISE_SERF}"
}

ports {
  http = ${PORT_HTTP}
  rpc  = ${PORT_RPC}
  serf = ${PORT_SERF}
}

advertise {
  # Defaults to the first private IP address.
  http = "${ADVERTISE_HTTP}"
  rpc  = "${ADVERTISE_RPC}"
  serf = "${ADVERTISE_SERF}" # non-default ports may be specified
}

plugin "raw_exec" {
    config {
        enabled = true
    }
}
